# üìò –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ n8n –¥–ª—è N-Coffee

**–î–ª—è –∫–æ–≥–æ:** –º–µ–Ω–µ–¥–∂–µ—Ä, –ø–µ—Ä–≤—ã–π —Ä–∞–∑ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—â–∏–π n8n  
**–í—Ä–µ–º—è:** 30-45 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** —Å—Ä–µ–¥–Ω—è—è (–µ—Å—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤ –≥–æ–ª–æ–≤–µ)

---

## –ß–ê–°–¢–¨ 1: –ò–º–ø–æ—Ä—Ç workflow –≤ n8n

### –®–∞–≥ 1.1: –û—Ç–∫—Ä—ã—Ç—å n8n
1. –û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä (Chrome/Firefox/Safari)
2. –ü–µ—Ä–µ–π–¥–∏ –ø–æ –∞–¥—Ä–µ—Å—É: **https://oleg94.app.n8n.cloud**
3. –í–æ–π–¥–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç (–∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
4. –¢—ã —É–≤–∏–¥–∏—à—å –ø—É—Å—Ç–æ–π dashboard —Å –Ω–∞–¥–ø–∏—Å—å—é "Welcome to n8n!"

### –®–∞–≥ 1.2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π workflow
1. –í –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"+"** (Add workflow)
2. –ò–ª–∏ –Ω–∞–∂–º–∏ **"Create Workflow"** –≤ —Ü–µ–Ω—Ç—Ä–µ —ç–∫—Ä–∞–Ω–∞
3. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä workflow ‚Äî –ø—É—Å—Ç–∞—è —Å–µ—Ä–∞—è —Å–µ—Ç–∫–∞ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ

### –®–∞–≥ 1.3: –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å workflow –∏–∑ —Ñ–∞–π–ª–∞
1. –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ workflow –Ω–∞–∂–º–∏ –Ω–∞ –º–µ–Ω—é **"..."** (—Ç—Ä–∏ —Ç–æ—á–∫–∏) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. –í—ã–±–µ—Ä–∏ **"Import from File"** –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é
3. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
4. –ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞: `nespresso-sait/n8n-workflows/`
5. –í—ã–±–µ—Ä–∏ —Ñ–∞–π–ª **"manager-reminder.json"**
6. –ù–∞–∂–º–∏ **"–û—Ç–∫—Ä—ã—Ç—å"**
7. Workflow –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è ‚Äî —Ç—ã —É–≤–∏–¥–∏—à—å —Å—Ö–µ–º—É –∏–∑ —É–∑–ª–æ–≤ (–∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –ª–∏–Ω–∏—è–º–∏)

### –®–∞–≥ 1.4: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å workflow
1. –í–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞ –ø–æ–ª–µ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "My workflow" ‚Äî –∫–ª–∏–∫–Ω–∏ —Ç—É–¥–∞
2. –í–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ: **"N-Coffee: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É"**
3. –ù–∞–∂–º–∏ **Enter** –∏–ª–∏ –∫–ª–∏–∫–Ω–∏ –≤–Ω–µ –ø–æ–ª—è
4. Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

### –®–∞–≥ 1.5: –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö workflow (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –∏ –¥—Ä—É–≥–∏–µ workflow (–±—Ä–æ—à–µ–Ω–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞ –∏ —Ç.–¥.):
1. –ù–∞–∂–º–∏ **"+"** —Å–ª–µ–≤–∞ —Å–≤–µ—Ä—Ö—É ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π workflow
2. –ü–æ–≤—Ç–æ—Ä–∏ —à–∞–≥–∏ 1.3-1.4 –¥–ª—è —Ñ–∞–π–ª–æ–≤:
   - `abandoned-cart.json`
   - `product-interest.json`
   - `new-order.json`

---

## –ß–ê–°–¢–¨ 2: –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

### –®–∞–≥ 2.1: –û—Ç–∫—Ä—ã—Ç—å BotFather
1. –û—Ç–∫—Ä–æ–π Telegram (–Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–µ)
2. –í –ø–æ–∏—Å–∫–µ –Ω–∞–π–¥–∏: **@BotFather**
3. –ù–∞–∂–º–∏ –Ω–∞ –Ω–µ–≥–æ, –∑–∞—Ç–µ–º –∫–Ω–æ–ø–∫—É **"START"** –≤–Ω–∏–∑—É
4. –¢—ã —É–≤–∏–¥–∏—à—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

### –®–∞–≥ 2.2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞
1. –ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É **"/newbot"** –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –≤ —á–∞—Ç: `/newbot`
2. BotFather —Å–ø—Ä–æ—Å–∏—Ç: "Alright, a new bot. How are we going to call it?"
3. –í–≤–µ–¥–∏ –∏–º—è –±–æ—Ç–∞: **"N-Coffee Manager Bot"**
4. BotFather —Å–ø—Ä–æ—Å–∏—Ç username (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ "bot"):
5. –í–≤–µ–¥–∏: **"ncoffee_manager_bot"** (–∏–ª–∏ –ø—Ä–∏–¥—É–º–∞–π —Å–≤–æ–π, –µ—Å–ª–∏ –∑–∞–Ω—è—Ç)
6. –ï—Å–ª–∏ —Å–≤–æ–±–æ–¥–µ–Ω ‚Äî –ø–æ–ª—É—á–∏—à—å —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ```
   Done! Congratulations on your new bot.
   You will find it at t.me/ncoffee_manager_bot
   Use this token to access the HTTP API:
   1234567890:ABCdefGHIjklMNOpqrSTUvwxyz123456789
   ```

### –®–∞–≥ 2.3: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Bot Token
1. –í —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ—Ç BotFather –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É —Å —Ç–æ–∫–µ–Ω–æ–º
2. –û–Ω –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: `1234567890:ABCdefGHIjklMNOpqrSTUvwxyz123456789`
3. **–°–∫–æ–ø–∏—Ä—É–π –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é** ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–æ!
4. –°–æ—Ö—Ä–∞–Ω–∏ –≤ –±–ª–æ–∫–Ω–æ—Ç/—Ñ–∞–π–ª ‚Äî –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ n8n

### –®–∞–≥ 2.4: –£–∑–Ω–∞—Ç—å —Å–≤–æ–π Chat ID
1. –í Telegram –Ω–∞–π–¥–∏ –±–æ—Ç–∞ **@userinfobot**
2. –ù–∞–∂–º–∏ **"START"**
3. –ë–æ—Ç –ø—Ä–∏—à–ª—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ```
   @your_username
   Id: 123456789
   First: Oleg
   Last: Borisov
   ```
4. –ß–∏—Å–ª–æ –ø–æ—Å–ª–µ **"Id:"** ‚Äî —ç—Ç–æ —Ç–≤–æ–π Chat ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789`)
5. **–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ —á–∏—Å–ª–æ** ‚Äî –æ–Ω–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ n8n

### –®–∞–≥ 2.5: –ù–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–µ–º—É –±–æ—Ç—É
1. –ù–∞–π–¥–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram (–ø–æ username –∏–∑ —à–∞–≥–∞ 2.2)
2. –ù–∞–∂–º–∏ **"START"**
3. –≠—Ç–æ –≤–∞–∂–Ω–æ ‚Äî –±–æ—Ç –Ω–µ —Å–º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å —Ç–µ–±–µ, –ø–æ–∫–∞ —Ç—ã –Ω–µ –Ω–∞—á–∞–ª –¥–∏–∞–ª–æ–≥

---

## –ß–ê–°–¢–¨ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Credentials –≤ n8n

### –®–∞–≥ 3.1: –û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ credentials
1. –í n8n (https://oleg94.app.n8n.cloud) –Ω–∞–∂–º–∏ –Ω–∞ **–∏–∫–æ–Ω–∫—É –Ω–∞—Å—Ç—Ä–æ–µ–∫** (‚öôÔ∏è —à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∞) –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
2. –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ: https://oleg94.app.n8n.cloud/credentials
3. –¢—ã —É–≤–∏–¥–∏—à—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "Credentials" —Å –∫–Ω–æ–ø–∫–æ–π **"Add Credential"**

### –®–∞–≥ 3.2: –°–æ–∑–¥–∞—Ç—å Telegram credentials
1. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"Add Credential"** (–∑–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞ —Å–≤–µ—Ä—Ö—É)
2. –í –ø–æ–ª–µ **"Credential Type"** –Ω–∞—á–Ω–∏ –ø–µ—á–∞—Ç–∞—Ç—å "telegram"
3. –í—ã–±–µ—Ä–∏ **"Telegram"** –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
4. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ —Å –ø–æ–ª–µ–º **"Access Token"**
5. –í—Å—Ç–∞–≤—å —Ç–æ–∫–µ–Ω –∏–∑ —à–∞–≥–∞ 2.3: `1234567890:ABCdefGHIjklMNOpqrSTUvwxyz123456789`
6. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"Save"** –≤–Ω–∏–∑—É
7. –î–∞–π –Ω–∞–∑–≤–∞–Ω–∏–µ credential: **"N-Coffee Telegram Bot"**

### –®–∞–≥ 3.3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials
1. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"Test"** —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º —Ç–æ–∫–µ–Ω–∞
2. –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî —É–≤–∏–¥–∏—à—å –∑–µ–ª—ë–Ω—É—é –≥–∞–ª–æ—á–∫—É –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ:
   - –¢–æ–∫–µ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
   - –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
   - –¢—ã –Ω–∞–ø–∏—Å–∞–ª –±–æ—Ç—É /start (—à–∞–≥ 2.5)

---

## –ß–ê–°–¢–¨ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ Webhook URL –∏–∑ n8n

### –®–∞–≥ 4.1: –û—Ç–∫—Ä—ã—Ç—å workflow
1. –ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª Workflows (–∏–∫–æ–Ω–∫–∞ üìã –≤ –ª–µ–≤–æ–º –º–µ–Ω—é)
2. –ù–∞–π–¥–∏ workflow **"N-Coffee: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É"**
3. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–µ–≥–æ ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä

### –®–∞–≥ 4.2: –ù–∞–π—Ç–∏ Webhook URL
1. –í workflow –Ω–∞–π–¥–∏ –ø–µ—Ä–≤—ã–π —É–∑–µ–ª ‚Äî **"Webhook"** (—Å–∞–º—ã–π –ª–µ–≤—ã–π, —Å –∏–∫–æ–Ω–∫–æ–π üåê)
2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–µ–≥–æ ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–ø—Ä–∞–≤–∞
3. –í –ø–∞–Ω–µ–ª–∏ –Ω–∞–π–¥–∏ —Ä–∞–∑–¥–µ–ª **"Webhook URLs"**
4. –¢–∞–º –¥–≤–µ —Å—Å—ã–ª–∫–∏:
   - **"Production URL"** ‚Äî –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - **"Test URL"** ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–°–∫–æ–ø–∏—Ä—É–π Production URL** ‚Äî –æ–Ω –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
   ```
   https://oleg94.app.n8n.cloud/webhook/manager-reminder
   ```

### –®–∞–≥ 4.3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥
1. –í —Ç–æ–π –∂–µ –ø–∞–Ω–µ–ª–∏ Webhook –Ω–∞–π–¥–∏ –ø–æ–ª–µ **"HTTP Method"**
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ **"POST"**
3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤—ã–±–µ—Ä–∏ POST –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞

---

## –ß–ê–°–¢–¨ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env.local

### –®–∞–≥ 5.1: –ù–∞–π—Ç–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª
1. –û—Ç–∫—Ä–æ–π –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ: `nespresso-sait/`
2. –ù–∞–π–¥–∏ —Ñ–∞–π–ª `.env.local` (–∏–ª–∏ `.env`)
3. –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `.env.local`

### –®–∞–≥ 5.2: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (VS Code, Notepad++, Sublime) –∏ –¥–æ–±–∞–≤—å:

```env
# URL webhook'–∞ n8n (–∏–∑ —à–∞–≥–∞ 4.2)
NEXT_PUBLIC_N8N_WEBHOOK_URL=https://oleg94.app.n8n.cloud/webhook/manager-reminder

# –°–µ–∫—Ä–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ (–ø—Ä–∏–¥—É–º–∞–π –ª—é–±–æ–π, –º–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤)
NEXT_PUBLIC_N8N_WEBHOOK_SECRET=ncoffee-secret-key-2026-safe

# URL —Å–∞–π—Ç–∞
NEXT_PUBLIC_SITE_URL=https://n-coffee.ru
```

**–í–∞–∂–Ω–æ:** –∑–∞–º–µ–Ω–∏ `manager-reminder` –Ω–∞ —Ç–æ, —á—Ç–æ —É —Ç–µ–±—è –≤ URL –∏–∑ —à–∞–≥–∞ 4.2

### –®–∞–≥ 5.3: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
1. –°–æ—Ö—Ä–∞–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (Ctrl+S / Cmd+S)
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ `.env.local` (—Å —Ç–æ—á–∫–æ–π –≤ –Ω–∞—á–∞–ª–µ)

### –®–∞–≥ 5.4: –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å–∞–π—Ç
1. –û—Ç–∫—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—ã:
   ```bash
   npm run build
   # –∏–ª–∏
   yarn build
   ```
3. –ó–∞–¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Vercel/Netlify/—Å–≤–æ–π —Ö–æ—Å—Ç–∏–Ω–≥)

---

## –ß–ê–°–¢–¨ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ n8n

### –®–∞–≥ 6.1: –û—Ç–∫—Ä—ã—Ç—å Variables
1. –í n8n –Ω–∞–∂–º–∏ –Ω–∞ ‚öôÔ∏è **Settings** (—à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∞) –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
2. –í—ã–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª **"Variables"** –≤ —Å–ø–∏—Å–∫–µ —Å–ª–µ–≤–∞
3. –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ: https://oleg94.app.n8n.cloud/variables

### –®–∞–≥ 6.2: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É **"Add Variable"** –∏ –¥–æ–±–∞–≤—å –ø–æ –æ—á–µ—Ä–µ–¥–∏:

| Key | Value | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------|----------|
| `TELEGRAM_MANAGER_CHAT_ID` | `123456789` | –¢–≤–æ–π Chat ID –∏–∑ —à–∞–≥–∞ 2.4 |
| `NEXT_PUBLIC_SITE_URL` | `https://n-coffee.ru` | URL —Å–∞–π—Ç–∞ |
| `N8N_WEBHOOK_SECRET` | `ncoffee-secret-key-2026-safe` | –¢–æ—Ç –∂–µ —Å–µ–∫—Ä–µ—Ç, —á—Ç–æ –≤ .env.local |

**–î–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:**
1. –í–≤–µ–¥–∏ Key (–Ω–∞–∑–≤–∞–Ω–∏–µ)
2. –í–≤–µ–¥–∏ Value (–∑–Ω–∞—á–µ–Ω–∏–µ)
3. –ù–∞–∂–º–∏ **"Save"**

### –®–∞–≥ 6.3: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ workflow (Consumption)
1. –û—Ç–∫—Ä–æ–π workflow "N-Coffee: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É"
2. –ù–∞–π–¥–∏ —É–∑–µ–ª **"Prepare Data"** (—Å–∏–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ —Å –∫–æ–¥–æ–º)
3. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–µ–≥–æ ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å —Å –∫–æ–¥–æ–º
4. –í –∫–æ–¥–µ –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
   ```javascript
   const CAPS_PER_PACK = 10;
   const DAILY_CONSUMPTION = 2.5;
   const REMINDER_DAYS_BEFORE = 3;
   ```
5. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å ‚Äî –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —á–∏—Å–ª–∞
6. –ù–∞–∂–º–∏ **"Execute Node"** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–ª–∏ **"Save"** –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

---

## –ß–ê–°–¢–¨ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 7.1: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ —Å–∞–π—Ç–µ
1. –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç https://n-coffee.ru –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –î–æ–±–∞–≤—å –ª—é–±—ã–µ –∫–∞–ø—Å—É–ª—ã –≤ –∫–æ—Ä–∑–∏–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3 —É–ø–∞–∫–æ–≤–∫–∏)
3. –ü–µ—Ä–µ–π–¥–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –∑–∞–∫–∞–∑–∞
4. –ó–∞–ø–æ–ª–Ω–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
   - –ò–º—è: **–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤**
   - –¢–µ–ª–µ—Ñ–æ–Ω: **+7 (999) 999 99 99**
   - Email: **test@example.com**
5. –û—Ñ–æ—Ä–º–∏ –∑–∞–∫–∞–∑ –¥–æ –∫–æ–Ω—Ü–∞

### –®–∞–≥ 7.2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—à–ª–æ –≤ n8n
1. –í n8n –ø–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª **"Executions"** (–∏–∫–æ–Ω–∫–∞ ‚è± –≤ –ª–µ–≤–æ–º –º–µ–Ω—é)
2. –ò–ª–∏: https://oleg94.app.n8n.cloud/executions
3. –¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å —Å —Ç–≤–æ–∏–º workflow
4. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **"Success"** (–∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
5. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –∑–∞–ø–∏—Å—å ‚Äî —É–≤–∏–¥–∏—à—å –¥–µ—Ç–∞–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –®–∞–≥ 7.3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ reminder
1. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ) –ø—Ä–æ–≤–µ—Ä—å —Ñ–∞–π–ª: `data/reminders.json`
2. –¢–∞–º –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å—å —Å —Ç–≤–æ–∏–º clientId

### –®–∞–≥ 7.4: –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–Ω–µ –∂–¥–∞—Ç—å 17 –¥–Ω–µ–π)

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É –≤ —Ñ–∞–π–ª–µ**
1. –û—Ç–∫—Ä–æ–π `data/reminders.json`
2. –ù–∞–π–¥–∏ —Å–≤–æ—é –∑–∞–ø–∏—Å—å
3. –ò–∑–º–µ–Ω–∏ `"reminderDate"` –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É
4. –°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª
5. –í n8n –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏ workflow: –Ω–∞–∂–º–∏ **"Execute Workflow"**

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –¢–µ—Å—Ç–æ–≤—ã–π webhook**
1. –í workflow –∫–ª–∏–∫–Ω–∏ –Ω–∞ —É–∑–µ–ª **"Webhook"**
2. –í –ø–∞–Ω–µ–ª–∏ —Å–ø—Ä–∞–≤–∞ –Ω–∞–π–¥–∏ **"Test URL"**
3. –°–∫–æ–ø–∏—Ä—É–π –µ–≥–æ
4. –ò—Å–ø–æ–ª—å–∑—É–π curl –∏–ª–∏ Postman –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç –í: –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å—á—ë—Ç –≤ –∫–æ–¥–µ**
1. –í —É–∑–ª–µ "Prepare Data" –∏–∑–º–µ–Ω–∏:
   ```javascript
   const reminderDelayDays = 1; // –í–º–µ—Å—Ç–æ —Ä–∞—Å—á—ë—Ç–∞
   ```
2. –°–æ—Ö—Ä–∞–Ω–∏ workflow
3. –°–¥–µ–ª–∞–π –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–∏–¥—ë—Ç —á–µ—Ä–µ–∑ 1 –¥–µ–Ω—å

---

## –ß–ê–°–¢–¨ 8: Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–±—ã—Ç–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ n8n

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: URL webhook**
1. –û—Ç–∫—Ä–æ–π `.env.local`
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `NEXT_PUBLIC_N8N_WEBHOOK_URL` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –û–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Production URL –∏–∑ —à–∞–≥–∞ 4.2

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –°–µ–∫—Ä–µ—Ç**
1. –°–µ–∫—Ä–µ—Ç –≤ `.env.local` –∏ –≤ n8n Variables –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å
2. –ü—Ä–æ–≤–µ—Ä—å, –Ω–µ—Ç –ª–∏ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –°–∞–π—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω**
1. –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env.local` –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å–∞–π—Ç
2. –í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏: `npm run build`

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 4: CORS**
1. –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç
2. –ù–∞–∂–º–∏ F12 ‚Üí Console
3. –°–¥–µ–ª–∞–π –∑–∞–∫–∞–∑
4. –ò—â–∏ –æ—à–∏–±–∫–∏ –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º

---

### –ü—Ä–æ–±–ª–µ–º–∞: Telegram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Credentials**
1. Settings ‚Üí Credentials ‚Üí Telegram
2. –ù–∞–∂–º–∏ **"Test"** ‚Äî –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Chat ID**
1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `TELEGRAM_MANAGER_CHAT_ID` –¥–æ–±–∞–≤–ª–µ–Ω –≤ Variables
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç—ã –Ω–∞–ø–∏—Å–∞–ª –±–æ—Ç—É /start

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ü—Ä–æ–≤–µ—Ä—å workflow**
1. –û—Ç–∫—Ä–æ–π workflow
2. –ù–∞–π–¥–∏ —É–∑–µ–ª "Send Telegram"
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ –ø–æ–ª–µ Chat ID —Å—Ç–æ–∏—Ç: `{{ $env.TELEGRAM_MANAGER_CHAT_ID }}`

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Wait node**
1. –í workflow –Ω–∞–π–¥–∏ —É–∑–µ–ª "Wait Until Reminder"
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –æ–Ω –Ω–µ –Ω–∞ –ø–∞—É–∑–µ
3. –í —Ä–∞–∑–¥–µ–ª–µ Executions –ø—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Check Validity**
1. –£–∑–µ–ª "Check Validity" –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `shouldSend: true`
2. –ï—Å–ª–∏ `false` ‚Äî –ø—Ä–æ–≤–µ—Ä—å, –Ω–µ —Å–¥–µ–ª–∞–ª –ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –§–∞–π–ª reminders.json**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ –ø—É—Å—Ç–æ–π
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ orderId —Å–æ–≤–ø–∞–¥–∞–µ—Ç

---

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

**–í n8n:**
1. –ü–µ—Ä–µ–π–¥–∏ –≤ **Executions** (‚è±)
2. –ù–∞–π–¥–∏ –Ω—É–∂–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
3. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –Ω–µ–≥–æ
4. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–π —É–∑–ª—ã, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
1. –õ–æ–≥–∏ –æ–±—ã—á–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª–∏, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω —Å–∞–π—Ç
2. –ò–ª–∏ –≤ –ø–∞–Ω–µ–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞ (Vercel, Netlify)

---

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

| –û—à–∏–±–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|
| "Unauthorized" | –ü—Ä–æ–≤–µ—Ä—å `X-Webhook-Secret` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö |
| "Reminder not found" | –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ `POST /api/reminders` –æ—Ç—Ä–∞–±–æ—Ç–∞–ª |
| "newer_order_exists" | –ö–ª–∏–µ–Ω—Ç —Å–¥–µ–ª–∞–ª –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ |
| Telegram "Chat not found" | –ù–∞–ø–∏—à–∏ –±–æ—Ç—É /start –≤ Telegram |
| "Cannot read property" | –ü—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ webhook |

---

## –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê (—á–µ–∫-–ª–∏—Å—Ç)

- [ ] –°–æ–∑–¥–∞–Ω Telegram –±–æ—Ç —á–µ—Ä–µ–∑ @BotFather
- [ ] –ü–æ–ª—É—á–µ–Ω Bot Token
- [ ] –ü–æ–ª—É—á–µ–Ω Chat ID —á–µ—Ä–µ–∑ @userinfobot
- [ ] –ù–∞–ø–∏—Å–∞–ª –±–æ—Ç—É /start
- [ ] –°–æ–∑–¥–∞–Ω—ã Credentials –≤ n8n
- [ ] Credentials –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã (–∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
- [ ] Workflow –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏–∑ manager-reminder.json
- [ ] –ü–æ–ª—É—á–µ–Ω Production Webhook URL
- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env.local` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã Variables –≤ n8n (TELEGRAM_MANAGER_CHAT_ID)
- [ ] –°–∞–π—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω
- [ ] –°–¥–µ–ª–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
- [ ] –°–æ–±—ã—Ç–∏–µ –≤–∏–¥–Ω–æ –≤ Executions
- [ ] Reminder —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –≤ data/reminders.json

---

## –ü–û–ú–û–©–¨

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å —ç—Ç–æ—Ç —á–µ–∫-–ª–∏—Å—Ç
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ n8n (Executions)
3. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
4. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç

–£—Å–ø–µ—Ö–æ–≤! ‚òï
